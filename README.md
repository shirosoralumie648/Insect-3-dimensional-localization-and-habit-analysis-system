# 微小昆虫三维定位与行为分析系统 (Insect 3D Localization and Behavior Analysis System)

## 项目概述

本项目旨在开发一个基于双摄像头立体视觉和深度学习的系统，用于对微小昆虫（如果蝇、蜜蜂等）进行实时检测、三维空间定位、轨迹跟踪及行为分析。系统利用计算机视觉和人工智能技术，为昆虫行为学研究、生态学调查和农业害虫监测等领域提供高精度的数据采集与分析工具。

## 核心功能

### 1. 多相机协同采集
- 双摄像头同步采集系统，支持高帧率（≥60fps）图像获取
- 基于ArUco码的相机自动校准与参数优化
- 适应不同光照条件的图像预处理

### 2. 微小昆虫实时检测
- 基于YOLOv11的微小目标检测模型
- 支持多种昆虫种类的同时识别与分类
- 针对微小目标的检测优化算法

### 3. 三维空间定位
- 基于ArUco码参考系的双目立体视觉三角测量
- 亚毫米级三维定位精度
- 实时坐标系转换与校正

### 4. 多目标轨迹跟踪
- 先进的多目标跟踪算法（ByteTrack/DeepSORT）
- 昆虫个体身份保持与重识别
- 遮挡处理与轨迹预测

### 5. 行为分析与可视化
- 三维轨迹记录与回放
- 行为模式识别与统计
- 交互式3D数据可视化界面
- 数据导出与共享功能

## 技术架构

### 硬件架构

```
+-------------------------+     +-------------------------+
|    高速相机 1 (60FPS+)   |     |    高速相机 2 (60FPS+)   |
+------------+------------+     +------------+------------+
             |                               |
             |   +------------------+        |
             +---| 同步触发控制单元  |--------+
                 +------------------+
                           |
+--------------------------|---------------------------+
|                  高性能计算平台                      |
|  +----------------+    +------------------------+  |
|  | 图像采集接口    |----| 图像预处理与存储单元     |  |
|  +----------------+    +------------------------+  |
|                             |                      |
|  +----------------+    +------------------------+  |
|  | GPU加速单元    |----| 深度学习推理引擎        |  |
|  +----------------+    +------------------------+  |
|                             |                      |
|  +----------------+    +------------------------+  |
|  | 三维重建模块   |----| 目标跟踪与轨迹分析模块  |  |
|  +----------------+    +------------------------+  |
|                             |                      |
|  +-----------------------------------------------+  |
|  |              数据可视化与用户界面              |  |
|  +-----------------------------------------------+  |
+-------------------------------------------------------+
```

### 软件架构

#### 核心技术栈
- **编程语言**：Python 3.9+
- **图像处理**：OpenCV 4.5+, NumPy
- **深度学习**：PyTorch 2.0+, ONNX Runtime
- **三维重建**：Open3D
- **数据可视化**：Matplotlib, Plotly, PyQtGraph
- **用户界面**：PyQt6 / Flask+Three.js

#### 系统模块划分

1. **数据采集模块（Data Acquisition Module）**
   - 相机驱动与参数控制
   - 图像同步获取
   - 图像预处理与增强
   - 基于ArUco码的相机内外参标定与校准

2. **目标检测模块（Object Detection Module）**
   - YOLOv11模型加载与推理
   - 微小目标检测优化
   - 检测结果过滤与后处理
   - 模型在线更新机制

3. **三维重建模块（3D Reconstruction Module）**
   - ArUco码世界坐标系建立
   - 立体匹配算法
   - 三角测量与深度计算
   - 坐标系变换与空间位置优化

4. **轨迹跟踪模块（Trajectory Tracking Module）**
   - 多目标关联算法
   - 卡尔曼滤波轨迹平滑
   - 轨迹断点处理
   - 个体ID管理

5. **行为分析模块（Behavior Analysis Module）**
   - 轨迹特征提取
   - 行为模式分类
   - 统计分析引擎
   - 异常行为检测

6. **可视化与交互模块（Visualization & Interaction Module）**
   - 实时3D场景渲染
   - 轨迹回放控制
   - 数据查询与筛选
   - 分析报告生成

7. **数据管理模块（Data Management Module）**
   - 原始数据存储
   - 处理结果持久化
   - 数据导入/导出
   - 实验配置管理

## 技术实现与挑战

### 主要挑战

1. **微小目标检测精度**
   - 小目标在像素尺寸上通常只有几个到几十个像素
   - 昆虫形态与背景相似度高
   - 高速运动造成的图像模糊

2. **双相机目标匹配**
   - 同一昆虫在两个视角下的外观差异
   - 多个昆虫同时出现时的匹配歧义
   - 部分遮挡情况下的正确关联

3. **实时性能要求**
   - 高帧率图像的实时处理
   - 多目标并行跟踪的计算复杂性
   - 3D可视化的渲染效率

### 解决方案

1. **检测精度提升**
   - 针对微小昆虫的专用数据集构建
   - YOLOv11模型结构优化，增强小目标检测层
   - 多尺度特征融合与注意力机制
   - 数据增强与迁移学习技术

2. **双相机匹配优化**
   - 基于ArUco码建立的参考坐标系
   - 基于极线几何约束的匹配候选筛选
   - 深度学习特征提取与相似度匹配
   - 时空一致性约束验证
   - 多假设追踪解决歧义情况

3. **性能优化策略**
   - GPU加速计算（CUDA优化）
   - 模型量化与推理优化（TensorRT/ONNX）
   - 多线程并行处理架构
   - 计算资源动态分配

## 应用场景

- **基础科研领域**：昆虫行为学研究、群体行为分析、生物节律研究
- **农业应用**：害虫监测与预警、生物防治效果评估、授粉昆虫活动分析
- **生态环境**：环境质量生物指标监测、生态系统健康评估
- **药物研发**：昆虫模型药物筛选、行为药理学研究

## 部署要求

### 硬件要求
- 两台同型号工业相机（建议：≥1080p分辨率，≥60fps帧率）
- 同步触发控制器
- NVIDIA RTX系列GPU（建议RTX 3060或更高）
- 16GB+内存，SSD存储
- 可调节照明系统（建议IR照明以减少对昆虫行为的干扰）

### 软件要求
- Windows 10/11 或 Linux（Ubuntu 20.04+）操作系统
- CUDA 11.7+ 和 cuDNN 8.5+
- Python 3.9+
- 相机SDK（根据所选相机型号）

## 项目规划

### 开发路线图

1. **第一阶段**：基础架构搭建
   - 双相机系统设置与ArUco码标定
   - 数据采集模块开发
   - YOLOv11模型初步训练与测试

2. **第二阶段**：核心功能实现
   - 目标检测优化与部署
   - 三维重建算法实现
   - 初步轨迹跟踪功能

3. **第三阶段**：系统整合与优化
   - 多模块集成与数据流优化
   - 用户界面开发
   - 性能优化与实时性提升

4. **第四阶段**：高级功能开发
   - 行为分析算法实现
   - 数据管理与报告系统
   - 批量处理与自动化分析

5. **第五阶段**：系统验证与部署
   - 全面功能测试与评估
   - 用户反馈收集与改进
   - 部署文档与培训材料

## 项目状态

- [x] 项目规划与需求分析
- [ ] 系统架构设计
- [ ] 数据采集模块开发
- [ ] 目标检测模块开发
- [ ] 三维重建模块开发
- [ ] 轨迹跟踪模块开发
- [ ] 行为分析模块开发
- [ ] 可视化与交互模块开发
- [ ] 系统测试与优化
- [ ] 部署与文档

## 贡献指南

欢迎对本项目进行贡献！请遵循以下步骤：

1. Fork本仓库
2. 创建您的特性分支 (`git checkout -b feature/amazing-feature`)
3. 提交您的更改 (`git commit -m 'Add some amazing feature'`)
4. 推送到分支 (`git push origin feature/amazing-feature`)
5. 打开Pull Request

## 许可证

本项目采用 MIT 许可证 - 详见 [LICENSE](LICENSE) 文件

## 联系方式

项目维护者：[您的姓名/组织] - [您的邮箱]

---

*最后更新：2025年5月10日*